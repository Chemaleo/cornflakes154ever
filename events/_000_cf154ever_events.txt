
add_namespace = cf154ever_event

country_event = {
	id = cf154ever_event.1
	
	hidden = yes
	
	fire_only_once = yes
	
	trigger = {
		original_tag = ROM
		is_ai = yes
		is_historical_focus_on = yes
		has_idea_with_trait = fascist_demagogue
		fascism > 0.5
		has_political_power < 100
		NOT = { has_government = fascism }
	}
	
	mean_time_to_happen = { days = 2 }
	
	immediate = {
		ROM = {
			set_politics = { ruling_party = fascism }
		}
	}
	
	option = { name = cf154ever_event.1.a }
}

#	Пасхальный ивент, написанный под вдохновлением от Tom Blaine
country_event = {
	id = cf154ever_event.2
	title = cf154ever_event.2.t
	desc = cf154ever_event.2.d
	picture = GFX_report_event_stalin_vs_martians
	
	fire_only_once = yes
	
	trigger = {
		date > 1942.5.31
		original_tag = SOV
		communism > 0.99
		is_historical_focus_on = no		
		has_war = no
		has_country_leader = { name = "Joseph Stalin" ruling_only = yes }
		has_full_control_of_state = 516	#	Северозападная Сибирь
		has_full_control_of_state = 644	#	Северовосточная Сибирь
		has_tech = mechanised_infantry2
		has_tech = improved_medium_tank
		has_tech = advanced_centimetric_radar
		divisions_in_state = {
			type = mechanized
			size > 0
			state = 516
		}
		divisions_in_state = {
			type = armor
			size > 0
			state = 644
		}
		516 = {
			infrastructure > 9
			radar_station > 5
		}
		644 = {
			infrastructure > 9
			radar_station > 5
			any_province_building_level	= {
				province = {
					id = 13204
				}
				building = naval_base
				level > 9
			}
			any_province_building_level	= {
				province = {
					id = 13204
				}
				building = coastal_bunker
				level > 9
			}
		}
		NOT = { has_war_with = USA }
	}
	
	mean_time_to_happen = { days = 2 }
	
	immediate = {
		hidden_effect = {
			USA = {
				set_politics = { ruling_party = fascism }
				set_party_name = { ideology = fascism long_name = USA_martial_order_long name = USA_martial_order }
				add_popularity = { ideology = fascism popularity = 1 }
				kill_country_leader = yes
				create_country_leader = {
					name = "Green Martian"
					picture = GFX_portrait_martian
					expire = "2009.4.29"
					ideology = nazism
					traits = { hates_ussr }
				}
				load_oob = cf154ever_oob_USA_easter_egg
				if = {
					limit = {
						is_in_faction_with = ENG
						ENG = { NOT = { has_government = fascism } }
					}
					leave_faction = yes
				}
				if = {
					limit = {
						has_war_with = GER
						GER = { has_government = fascism }
						ENG = { NOT = { has_government = fascism } }						
					}
					white_peace = {
						tag = GER
						message = cf154ever_easter_egg_activated_tt
					}
				}
				if = {
					limit = {
						has_war_with = ITA
						ITA = { has_government = fascism }
						ENG = { NOT = { has_government = fascism } }						
					}
					white_peace = {
						tag = ITA
						message = cf154ever_easter_egg_activated_tt
					}
				}
				if = {
					limit = {
						has_war_with = JAP
						JAP = { has_government = fascism }
						ENG = { NOT = { has_government = fascism } }						
					}
					white_peace = {
						tag = JAP
						message = cf154ever_easter_egg_activated_tt
					}
				}
			}
		}
	}
	
	option = { name = cf154ever_event.2.a }
}

country_event = {
	id = cf154ever_event.3
	title = cf154ever_event.3.t
	desc = cf154ever_event.3.d
	picture = GFX_report_event_german_troops
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = cf154ever_event.3.a
		GER = {
			if = {
				limit = {
					has_idea = all_adults_serve
					has_manpower < 500000
				}
				add_manpower = 500000				
			}
			else_if = {
				limit = {
					has_idea = scraping_the_barrel
					has_manpower < 100000
				}
				add_manpower = 1000000
			}
			
			if = {
				limit = {
					has_tech = advanced_infantry_weapons
					has_equipment = { infantry_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_3
					amount = 50000
					producer = GER
				}
			}
			else_if = {
				limit = {
					has_tech = improved_infantry_weapons
					has_equipment = { infantry_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_2
					amount = 50000
					producer = GER 
				}
			}
			else_if = {
				limit = {
					has_equipment = { infantry_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_1
					amount = 50000
					producer = GER 
				}
			}
			
			if = {
				limit = {
					has_tech = artillery4
					has_equipment = { artillery_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment_3
					amount = 10000
					producer = GER
				}
			}
			else_if = {
				limit = {
					has_tech = artillery1
					has_equipment = { artillery_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment_2
					amount = 10000
					producer = GER
				}
			}
			else_if = {
				limit = { has_equipment = { artillery_equipment < 10000 } }
				add_equipment_to_stockpile = {
					type = artillery_equipment_1
					amount = 10000
					producer = GER
				}
			}
			
			if = {
				limit = { has_equipment = { support_equipment_1 < 10000 } }
				add_equipment_to_stockpile = {
					type = support_equipment_1
					amount = 10000
				}
			}
		}

		SOV = {
			if = {
				limit = {
					has_idea = all_adults_serve
					has_manpower < 500000
				}
				add_manpower = 500000				
			}
			else_if = {
				limit = {
					has_idea = scraping_the_barrel
					has_manpower < 100000
				}
				add_manpower = 1000000
			}
			
			if = {
				limit = {
					has_tech = advanced_infantry_weapons
					has_equipment = { infantry_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_3
					amount = 50000
					producer = SOV
				}
			}
			else_if = {
				limit = {
					has_tech = improved_infantry_weapons
					has_equipment = { infantry_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_2
					amount = 50000
					producer = SOV 
				}
			}
			else_if = {
				limit = {
					has_equipment = { infantry_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment_1
					amount = 50000
					producer = SOV 
				}
			}
			
			if = {
				limit = {
					has_tech = artillery4
					has_equipment = { artillery_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment_3
					amount = 10000
					producer = SOV
				}
			}
			else_if = {
				limit = {
					has_tech = artillery1
					has_equipment = { artillery_equipment < 10000 }
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment_2
					amount = 10000
					producer = SOV
				}
			}
			else_if = {
				limit = { has_equipment = { artillery_equipment < 10000 } }
				add_equipment_to_stockpile = {
					type = artillery_equipment_1
					amount = 10000
					producer = SOV
				}
			}
			
			if = {
				limit = { has_equipment = { support_equipment_1 < 10000 } }
				add_equipment_to_stockpile = {
					type = support_equipment_1
					amount = 10000
				}
			}
		}
	}
	
	option = {
		name = cf154ever_event.3.b
		GER = {
			add_manpower = 500000
			
			if = {
				limit = { has_tech = advanced_infantry_weapons }
				add_equipment_to_stockpile = {
					type = infantry_equipment_3
					amount = 50000
					producer = GER
				}
			}
			else_if = {
				limit = { has_tech = improved_infantry_weapons }
				add_equipment_to_stockpile = {
					type = infantry_equipment_2
					amount = 50000
					producer = GER 
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = infantry_equipment_1
					amount = 50000
					producer = GER 
				}
			}
			
			if = {
				limit = { has_tech = artillery4 }
				add_equipment_to_stockpile = {
					type = artillery_equipment_3
					amount = 10000
					producer = GER
				}
			}
			else_if = {
				limit = { has_tech = artillery1 }
				add_equipment_to_stockpile = {
					type = artillery_equipment_2
					amount = 10000
					producer = GER
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = artillery_equipment_1
					amount = 10000
					producer = GER
				}
			}
			
			add_equipment_to_stockpile = {
				type = support_equipment_1
				amount = 10000
			}
		}

		SOV = {
			add_manpower = 500000
			
			if = {
				limit = { has_tech = advanced_infantry_weapons }
				add_equipment_to_stockpile = {
					type = infantry_equipment_3
					amount = 50000
					producer = SOV
				}
			}
			else_if = {
				limit = { has_tech = improved_infantry_weapons }
				add_equipment_to_stockpile = {
					type = infantry_equipment_2
					amount = 50000
					producer = SOV 
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = infantry_equipment_1
					amount = 50000
					producer = SOV 
				}
			}
			
			if = {
				limit = { has_tech = artillery4 }
				add_equipment_to_stockpile = {
					type = artillery_equipment_3
					amount = 10000
					producer = SOV
				}
			}
			else_if = {
				limit = { has_tech = artillery1 }
				add_equipment_to_stockpile = {
					type = artillery_equipment_2
					amount = 10000
					producer = SOV
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = artillery_equipment_1
					amount = 10000
					producer = SOV
				}
			}
			
			add_equipment_to_stockpile = {
				type = support_equipment_1
				amount = 10000
			}
		}
	}
	
	option = { name = cf154ever_event.3.c }
}
